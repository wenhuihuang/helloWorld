<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<script type="text/javascript">
		/**
		 * FileReader
		 */
		
			//以data url 方式将文件读入页面
			function readAsDataURL(){
				var f = document.getElementById("file").files[0];
				if(!/image\/\w+/.test(f.type)){
					alert("请上传图片！");
					return false;
				}
				var reader = new FileReader();
				reader.readAsDataURL(f);
				reader.onload=function(e){
					var d = document.getElementsByTagName("body")[0];
					var img = document.createElement("img");
					img.src=this.result;
					img.width=120;
					d.appendChild(img)
				}
			}
			
			//以二进制将文件读入页面
			function readAsBinaryString(){
				var f = document.getElementById("file").files[0];
				var reader = new FileReader();
				reader.readAsBinaryString(f)
				reader.onload=function(f){
					var b = document.getElementsByTagName("body")[0];
					var d = document.createElement("div");
					d.innerHTML=this.result;
					b.appendChild(d)
					
				}
			}
			
			//以文本形式寫入頁面
			function readAsText(){
				var f = document.getElementById("file").files[0];
				var reader = new FileReader();
				reader.readAsText(f,'gb2312')
				reader.onload=function(f){
					var b = document.getElementsByTagName("body")[0];
					var d = document.createElement("div");
					d.innerHTML=this.result;
					b.appendChild(d)
					
				}
			}
		</script>
	</head>
		
	<body>
		<input type="file" id="file" value="请上传图片"  />
		<input type="button" value="上传图片" onclick="readAsDataURL()" />
		<input type="button" value="二進制" onclick="readAsBinaryString()" />
		<input type="button" value="文本" onclick="readAsText()" />
	</body>
</html>
